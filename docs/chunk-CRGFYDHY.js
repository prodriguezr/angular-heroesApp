import{A as et,B as tt,C as it,D as rt,E as ot,F as nt,G as at,H as mt,I as lt,J as st,K as w,L as re,M as O,N as pt,O as ct,P as oe,Q as dt,R as ut,S as ft,T as ht,U as gt,V as vt,W as Ct,X as bt,a as Q,b as W,c as P,d as X,e as $e,f as qe,g as Ge,h as ze,i as Ue,j as Je,k as Ke,l as Qe,m as We,n as Y,o as Z,p as Xe,q as Ye,r as v,s as Ze,t as D,u as ee,v as N,w as te,x as L,y as ie,z as T}from"./chunk-QV4EEUTW.js";import{a as Ve,g as U,h as je,i as J,j as K,k as Ce}from"./chunk-FBMLSW67.js";import"./chunk-W5UVDF5Y.js";import{B as he,Ba as xe,D as $,Fb as s,Gb as Me,Kb as ye,Lb as Fe,Mb as Pe,Nb as ke,Nc as I,Ob as r,Oc as z,Pb as t,Pc as Oe,Qb as l,Rc as Re,Sb as y,Sc as Ae,Tc as Be,V as ge,Vb as d,Xb as H,Za as k,aa as Ee,ab as a,ba as q,d as _e,ec as E,fc as n,ga as p,gc as f,hc as u,jc as De,kc as ve,lc as x,mc as F,n as j,nb as h,nc as Ne,oa as _,ob as G,oc as Le,pa as S,qb as Ie,r as Se,s as He,ub as g,wc as Te,zc as we}from"./chunk-4WRXTSLH.js";var yt=()=>({width:"250px"});function Ft(o,i){if(o&1){let e=y();r(0,"mat-list-item",10),d("click",function(){_(e),H();let c=E(2);return S(c.toggle())}),r(1,"mat-icon",11),n(2),t(),r(3,"span"),n(4),t()()}if(o&2){let e=i.$implicit;s("routerLink",e.route),a(2),f(e.icon),a(2),f(e.label)}}var ne=class o{sidebarItems=[{label:"Listado",icon:"label",route:"./list"},{label:"Agregar",icon:"add",route:"./add"},{label:"Buscar",icon:"search",route:"./search"}];static \u0275fac=function(e){return new(e||o)};static \u0275cmp=h({type:o,selectors:[["app-layout"]],standalone:!1,decls:21,vars:3,consts:[["sidenav",""],["fullscreen",""],["mode","push",3,"ngStyle"],["color","#002884"],[1,"spacer"],["mat-icon-button","",3,"click"],[3,"routerLink","click",4,"ngFor","ngForOf"],["color","primary"],["mat-button",""],[1,"container","p-4"],[3,"click","routerLink"],["matListItemIcon",""]],template:function(e,m){if(e&1){let c=y();r(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0)(3,"mat-toolbar",3)(4,"span"),n(5,"Men\xFA"),t(),l(6,"span",4),r(7,"button",5),d("click",function(){_(c);let B=E(2);return S(B.toggle())}),r(8,"mat-icon"),n(9,"close"),t()()(),r(10,"mat-nav-list"),g(11,Ft,5,3,"mat-list-item",6),t()(),r(12,"mat-toolbar",7)(13,"button",5),d("click",function(){_(c);let B=E(2);return S(B.toggle())}),r(14,"mat-icon"),n(15,"menu"),t()(),l(16,"span",4),r(17,"button",8),n(18,"Logout"),t()(),r(19,"div",9),l(20,"router-outlet"),t()()}e&2&&(a(),s("ngStyle",De(2,yt)),a(10),s("ngForOf",m.sidebarItems))},dependencies:[je,K,v,Ze,w,dt,oe,pt,ht,gt,Ct,I,Oe],encapsulation:2})};var St={production:!0,baseUrl:"http://prodrigu.cl/heroes/api"};var A=St.baseUrl,b=class o{http=p(Ve);getHeroes(){return this.http.get(`${A}/heroes`)}getHeroById(i){return this.http.get(`${A}/heroes/${i}`).pipe($(()=>j(void 0)))}getSuggestions(i){return this.http.get(`${A}/heroes?q=${i}&_limit=6`).pipe($(()=>j(void 0)))}addHero(i){return this.http.post(`${A}/heroes`,i)}updateHero(i){if(!i.id)throw Error("Hero id is required");return this.http.patch(`${A}/heroes/${i.id}`,i)}deleteHero(i){return this.http.delete(`${A}/heroes/${i}`).pipe($(e=>j(!1)),He(()=>!0))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})};var M=class o{transform(i){return!i.id&&!i.alt_img?"assets/no-image.png":i.alt_img?i.alt_img:`assets/heroes/${i.id}.jpg`}static \u0275fac=function(e){return new(e||o)};static \u0275pipe=Ie({name:"heroImage",type:o,pure:!0,standalone:!1})};var Pt=o=>["/heroes/edit",o],kt=o=>["/heroes",o];function Dt(o,i){if(o&1&&(r(0,"mat-chip"),n(1),t()),o&2){let e=i.$implicit;a(),u(" ",e," ")}}var le=class o{hero=xe.required();static \u0275fac=function(e){return new(e||o)};static \u0275cmp=h({type:o,selectors:[["heroes-hero-card"]],inputs:{hero:[1,"hero"]},standalone:!1,decls:30,vars:19,consts:[["mat-card-image","",3,"src","alt"],[1,"mt-2"],[4,"ngFor","ngForOf"],["nat-button","","mat-raised-button","","color","primary",3,"routerLink"],[1,"spacer"],["mat-button","","mat-raised","","mat-accent","",3,"routerLink"]],template:function(e,m){e&1&&(r(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),n(3),t(),r(4,"mat-card-subtitle"),n(5),t()(),l(6,"img",0),x(7,"heroImage"),r(8,"mat-card-content",1)(9,"h4"),n(10),t(),r(11,"p")(12,"strong"),n(13,"Primera aparici\xF3n"),t(),n(14),l(15,"br"),r(16,"mat-chip-listbox"),g(17,Dt,2,1,"mat-chip",2),x(18,"slice"),t()()(),l(19,"mat-divider"),r(20,"mat-card-actions")(21,"button",3)(22,"mat-icon"),n(23,"edit"),t(),n(24," Editar "),t(),l(25,"span",4),r(26,"button",5)(27,"mat-icon"),n(28,"more_horiz"),t(),n(29," Ver M\xE1s "),t()()()),e&2&&(a(3),u(" ",m.hero().superhero," "),a(2),f(m.hero().alter_ego),a(),s("src",F(7,9,m.hero()),k)("alt",m.hero().superhero),a(4),f(m.hero().publisher),a(4),u(" ",m.hero().first_appearance," "),a(3),s("ngForOf",Ne(18,11,m.hero().characters.split(","),0,3)),a(4),s("routerLink",ve(15,Pt,m.hero().id)),a(5),s("routerLink",ve(17,kt,m.hero().id)))},dependencies:[K,v,D,L,N,ie,T,te,ee,et,tt,w,O,I,Ae,M],encapsulation:2})};var se=class o{dialogRef=p(it);data=p(rt);onNoClick(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=h({type:o,selectors:[["app-confirm-dialog"]],standalone:!1,decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-button","",3,"click"],[1,"spacer"],["mat-button","","color","primary","cdkFocusInitial","",3,"click"]],template:function(e,m){e&1&&(r(0,"h2",0),n(1,"Confirmar operaci\xF3n"),t(),r(2,"mat-dialog-content")(3,"p"),n(4),t()(),r(5,"mat-dialog-actions")(6,"button",1),d("click",function(){return m.onNoClick()}),n(7,"No Thanks"),t(),l(8,"span",2),r(9,"button",3),d("click",function(){return m.onConfirm()}),n(10,"Ok"),t()()),e&2&&(a(4),u("Esta operaci\xF3n es irreversible. \xBFEst\xE1 seguro de eliminar al h\xE9roe '",m.data.superhero,"'?"))},dependencies:[v,nt,mt,at],encapsulation:2})};function Rt(o,i){if(o&1&&(r(0,"small"),n(1),t()),o&2){let e=H();a(),f(e.currentHero.superhero)}}function At(o,i){if(o&1&&(r(0,"mat-option",18),n(1),t()),o&2){let e=i.$implicit;s("value",e.id),a(),f(e.description)}}var V=class o{activatedRoute=p(U);router=p(J);heroesService=p(b);snackbar=p(vt);dialog=p(ot);fb=p(Qe);heroForm=this.fb.group({id:[""],superhero:["",[P.required,P.minLength(3)]],publisher:["",[P.required]],alter_ego:["",P.required],first_appearance:["",P.required],characters:["",P.required],alt_img:[""]});ngOnInit(){this.router.url.includes("edit")&&this.activatedRoute.params.pipe(ge(({id:i})=>this.heroesService.getHeroById(i))).subscribe(i=>{if(!i)return this.router.navigate(["heroes","list"]);this.heroForm.reset(i)})}publishers=[{id:"DC Comics",description:"DC Comics"},{id:"Marvel Comics",description:"Marvel Comics"}];get currentHero(){return this.heroForm.value}onSubmit(){if(!this.heroForm.invalid){if(this.currentHero.id){this.heroesService.updateHero(this.currentHero).subscribe(i=>{this.showSnackbar(`H\xE9roe '${i.superhero}' actualizado exitosamente.-`)});return}this.heroesService.addHero(this.currentHero).subscribe(i=>{this.router.navigate(["heroes","edit",i.id]),this.showSnackbar(`H\xE9roe '${i.superhero}' creado exitosamente.-`)})}}showSnackbar(i){this.snackbar.open(i,"done",{duration:2500})}onConfirm(){if(!this.currentHero.id)throw Error("Hero id is required");this.dialog.open(se,{data:this.heroForm.value}).afterClosed().pipe(he(e=>e),ge(()=>this.heroesService.deleteHero(this.currentHero.id)),he(e=>e)).subscribe(()=>{this.router.navigate(["heroes","list"])})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=h({type:o,selectors:[["heroes-edit-hero-page"]],standalone:!1,decls:49,vars:12,consts:[[4,"ngIf"],[1,"mb-2"],[1,"grid"],[1,"col-12","sm:col-6"],[1,"grid",3,"submit","formGroup"],["type","text","placeholder","Ingrese el nombre del super h\xE9roe","formControlName","superhero","required","","matInput",""],["type","text","placeholder","Nombre de la persona detr\xE1s del super h\xE9roe","formControlName","alter_ego","required","","matInput",""],[1,"col-12"],["type","text","placeholder","Nombre de la primera publicaci\xF3n donde apareci\xF3","formControlName","first_appearance","required","","matInput",""],["type","text","placeholder","Personajes","formControlName","characters","required","","matInput",""],[1,"col-6"],["formControlName","publisher","required",""],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","alt_img","formControlName","alt_img","matInput",""],[1,"flex","justify-content-around","mb-2"],["type","button","color","warn","mat-flat-button","",3,"click"],["type","button","color","primary","mat-flat-button","",3,"click"],["alt","Hero Image","mat-card-image","",1,"heroImage",3,"src"],[3,"value"]],template:function(e,m){e&1&&(r(0,"h1"),n(1),g(2,Rt,2,1,"small",0),t(),l(3,"mat-divider",1),r(4,"div",2)(5,"div",3)(6,"mat-card")(7,"mat-card-content")(8,"form",4),d("submit",function(){return m.onSubmit()}),r(9,"mat-form-field",3)(10,"mat-label"),n(11,"Super h\xE9roe"),t(),l(12,"input",5),t(),r(13,"mat-form-field",3)(14,"mat-label"),n(15,"Alter ego"),t(),l(16,"input",6),t(),r(17,"mat-form-field",7)(18,"mat-label"),n(19,"Primera aparici\xF3n"),t(),l(20,"input",8),t(),r(21,"mat-form-field",7)(22,"mat-label"),n(23,"Personajes"),t(),l(24,"input",9),t(),r(25,"mat-form-field",10)(26,"mat-label"),n(27,"Creado por:"),t(),r(28,"mat-select",11),g(29,At,2,2,"mat-option",12),t()(),r(30,"mat-form-field",7)(31,"mat-label"),n(32,"Imagen alternativa"),t(),l(33,"input",13),t()()(),r(34,"mat-card-actions",14)(35,"button",15),d("click",function(){return m.onConfirm()}),r(36,"mat-icon"),n(37,"delete"),t(),n(38," Eliminar "),t(),r(39,"button",16),d("click",function(){return m.onSubmit()}),r(40,"mat-icon"),n(41,"save"),t(),n(42," Guardar "),t()()()(),r(43,"div",3)(44,"mat-card"),l(45,"img",17),x(46,"heroImage"),t()()(),n(47),x(48,"json")),e&2&&(a(),u("",m.currentHero.id?"Editar":"Agregar"," H\xE9roe "),a(),s("ngIf",m.currentHero.id),a(6),s("formGroup",m.heroForm),a(21),s("ngForOf",m.publishers),a(6),Me("visibility",m.currentHero.id?"visible":"hidden"),a(10),s("src",F(46,8,m.currentHero),k),a(2),u(" ",F(48,10,m.currentHero),`
`))},dependencies:[Q,v,D,L,N,T,Z,Y,w,re,O,ft,I,z,Ge,W,X,$e,Ke,Ue,Je,Re,M],styles:[".heroImage[_ngcontent-%COMP%]{background-size:cover;height:540px;width:auto}"]})};function Bt(o,i){o&1&&(r(0,"mat-grid-list",2)(1,"mat-grid-tile"),l(2,"mat-spinner"),t()())}function Vt(o,i){if(o&1){let e=y();r(0,"div",3)(1,"mat-card",4)(2,"mat-card-header")(3,"mat-card-title"),n(4),t(),r(5,"mat-card-subtitle"),n(6),t()(),l(7,"img",5),x(8,"heroImage"),t(),r(9,"mat-card",4)(10,"mat-card-header")(11,"mat-card-title"),n(12,"Informaci\xF3n del h\xE9roe"),t(),r(13,"mat-card-subtitle"),n(14),t()(),r(15,"mat-card-content")(16,"mat-list")(17,"mat-list-item")(18,"strong"),n(19,"Primera aparici\xF3n:"),t(),n(20),t(),r(21,"mat-list-item")(22,"strong"),n(23,"Personajes:"),t(),n(24),t(),r(25,"mat-list-item")(26,"strong"),n(27,"Publicado por:"),t(),n(28),t(),r(29,"mat-list-item")(30,"strong"),n(31,"Alter ego:"),t(),n(32),t()()(),r(33,"mat-card-actions")(34,"button",6),d("click",function(){_(e);let c=H();return S(c.goBack())}),n(35,"Regresar"),t()()()()}if(o&2){let e=H();a(4),f(e.hero.alter_ego),a(2),f(e.hero.superhero),a(),s("src",F(8,10,e.hero),k)("alt",e.hero.alter_ego||"Imagen del h\xE9roe sin descripci\xF3n")("title",e.hero.alter_ego||"Sin t\xEDtulo disponible"),a(7),f(e.hero.superhero),a(6),u(" ",e.hero.first_appearance,""),a(4),u(" ",e.hero.characters,""),a(4),u(" ",e.hero.publisher,""),a(4),u(" ",e.hero.alter_ego,"")}}var pe=class o{activatedRoute=p(U);router=p(J);heroesService=p(b);heroId=Te(()=>this.activatedRoute.snapshot.params.id);hero;heroResource=we({request:()=>({id:this.heroId()}),loader:e=>_e(this,[e],function*({request:i}){let m=yield Se(this.heroesService.getHeroById(i.id));return m===void 0?this.router.navigate(["heroes","list"]):this.hero=m})});goBack(){this.router.navigate(["heroes","list"])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=h({type:o,selectors:[["heroes-hero-page"]],standalone:!1,decls:3,vars:2,consts:[["loading",""],["class","grid p-2",4,"ngIf","ngIfElse"],["cols","1"],[1,"grid","p-2"],[1,"col-12","sm:col-6"],["mat-card-image","",3,"src","alt","title"],["mat-button","","color","warn",3,"click"]],template:function(e,m){if(e&1&&g(0,Bt,3,0,"ng-template",null,0,Le)(2,Vt,36,12,"div",1),e&2){let c=E(1);a(2),s("ngIf",m.hero)("ngIfElse",c)}},dependencies:[v,D,L,N,ie,T,te,ee,st,lt,ct,oe,ut,z,M],encapsulation:2})};function jt(o,i){if(o&1&&(r(0,"div",2),l(1,"heroes-hero-card",3),t()),o&2){let e=i.$implicit;a(),s("hero",e)}}var ce=class o{heroesService=p(b);heroes=[];ngOnInit(){this.heroesService.getHeroes().subscribe(i=>{this.heroes=i})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=h({type:o,selectors:[["heroes-list-page"]],standalone:!1,decls:5,vars:1,consts:[[1,"grid","mb-8","pt-4"],["class","col-12 sm:col-4 md:col-3 xl:col-2",4,"ngFor","ngForOf"],[1,"col-12","sm:col-4","md:col-3","xl:col-2"],[3,"hero"]],template:function(e,m){e&1&&(r(0,"h1"),n(1,"Listado de Heroes"),t(),l(2,"mat-divider"),r(3,"div",0),g(4,jt,2,1,"div",1),t()),e&2&&(a(4),s("ngForOf",m.heroes))},dependencies:[O,I,le],encapsulation:2})};function $t(o,i){if(o&1&&(r(0,"mat-option",4),n(1),t()),o&2){let e=i.$implicit;s("value",e),a(),f(e.superhero)}}function qt(o,i){if(o&1&&(r(0,"mat-option",5),n(1),t()),o&2){let e=H();a(),u(" No se encontr\xF3 nada con el t\xE9rmino '",e.searchInput.value,"' ")}}var de=class o{heroesService=p(b);selectedHero;heroes=[];searchInput=new qe("");searchHero(){let i=this.searchInput.value||"";this.heroesService.getSuggestions(i).subscribe(e=>this.heroes=e)}onSelectedOption(i){if(!i.option.value){this.selectedHero=void 0;return}let e=i.option.value;this.searchInput.setValue(e.superhero),this.selectedHero=e}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=h({type:o,selectors:[["heroes-search-hero-page"]],standalone:!1,decls:12,vars:3,consts:[["auto","matAutocomplete"],[1,"flex","flex-column"],["type","text","matInput","","placeholder","H\xE9roe",3,"input","formControl","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],[3,"value"],["value",""]],template:function(e,m){if(e&1){let c=y();r(0,"div",1)(1,"h3"),n(2,"Buscador"),t(),r(3,"mat-form-field")(4,"mat-label"),n(5,"Buscador de H\xE9roes"),t(),r(6,"input",2),d("input",function(){return _(c),S(m.searchHero())}),t(),r(7,"mat-autocomplete",3,0),d("optionSelected",function(B){return _(c),S(m.onSelectedOption(B))}),Pe(9,$t,2,2,"mat-option",4,Fe),g(11,qt,2,1,"mat-option",5),t()()()}if(e&2){let c=E(8);a(6),s("formControl",m.searchInput)("matAutocomplete",c),a(3),ke(m.heroes),a(2),ye((m.heroes==null?null:m.heroes.length)===0&&m.searchInput.value&&m.searchInput.value.length>0?11:-1)}},dependencies:[Xe,Q,Ye,Z,Y,re,W,X,ze],encapsulation:2})};var Gt=[{path:"",component:ne,children:[{path:"add",component:V},{path:"search",component:de},{path:"edit/:id",component:V},{path:"list",component:ce},{path:":id",component:pe},{path:"**",redirectTo:"list"}]}],ue=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=G({type:o});static \u0275inj=q({imports:[Ce.forChild(Gt),Ce]})};var xt=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=G({type:o});static \u0275inj=q({imports:[ue,bt,Be,We]})};export{xt as HeroesModule};
